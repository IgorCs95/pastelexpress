<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:p="http://primefaces.org/ui">


<h:head>
	<title>Tela Login</title>
</h:head>

<h:body>
	<h:outputScript name="locale-primefaces.js" library="js" />


	<div id="container" align="center">

		<div id="login_box">
			<div id="logo_login">
				<p:graphicImage library="img" name="logo.png" width="80px"
					height="80px" />
			</div>


			<h:form id="formLogin">
			


				<p:panelGrid columns="2" styleClass="ui-noborder">

					<h:outputText value="Login: " />
					<p:inputText value="#{login.login}" size="37" required="true"/>

					<h:outputText value="Senha: " />
					<p:password value="#{login.senha}" size="37" required="true"/>

				</p:panelGrid>

				<br />
				<br />
				<p:panelGrid columns="3" styleClass="ui-noborder">

					<p:commandButton icon="ui-icon-unlocked" value="Entrar"	action="#{login.doLogin}" />

					<p:commandButton value="Cadastrar Usuario"
						icon="fa fa-edit" action="#{editUser.init()}"
						oncomplete="if (!args.validationFailed) { PF('userEditDialog').show() }"
						update=":userEditDialogId">
						<f:setPropertyActionListener value="#{user}"
							target="#{editUser.user}" />
						<p:resetInput target="userEditDialogId" />
					</p:commandButton>


					<p:commandButton icon="ui-icon-mail-closed" value="Recuperar Senha" type="button" />

				</p:panelGrid>

			</h:form>


		</div>


		<p:dialog id="userEditDialogId" widgetVar="userEditDialog"
			header="User edit" modal="true" dynamic="true" closeOnEscape="true">

			<p:messages id="idMessagesErrorsUserEdit" showDetail="true" closable="true" autoUpdate="true" severity="error" />

			<h:form id="formEdit">

				<ui:include src="/WEB-INF/templates/_cadastrar_user.xhtml" />

				<p:panelGrid columns="2" styleClass="ui-noborder">
					<p:commandButton id="botaoSubmeter" action="#{editUser.saveUser}"
						value="Submit" update="@form"
						oncomplete="if (!args.validationFailed) { PF('userEditDialog').hide(); }" icon="fa fa-save" />
					<p:commandButton id="botaoCancelar" value="Cancel"
						onclick="PF('userEditDialog').hide();" icon="fa fa-remove" />
				</p:panelGrid>

				<p:defaultCommand target="formEdit:botaoSubmeter" />

			</h:form>

		</p:dialog>











	</div>
	<!-- div container -->
	<div id="footer">
		<p:panel columns="1" style="width : 100%; text-align:center">
			<h:outputLabel value="My app - v1.0" />
		</p:panel>
	</div>

</h:body>
</html>